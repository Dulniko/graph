import pytest
from utils.edmonds_karp import EdmondsKarp


@pytest.mark.parametrize(
    "graph, source, sink, expected",
    [
        (
            [
                [0, 16, 13, 0, 0, 0],
                [0, 0, 0, 12, 0, 0],
                [0, 4, 0, 0, 14, 0],
                [0, 0, 9, 0, 0, 20],
                [0, 0, 0, 7, 0, 4],
                [0, 0, 0, 0, 0, 0],
            ],
            0,
            5,
            23,
        ),
        (
            [
                [0, 10, 5, 0],
                [0, 0, 15, 10],
                [0, 0, 0, 10],
                [0, 0, 0, 0],
            ],
            0,
            3,
            15,
        ),
        (
            [
                [0, 10, 10, 0],
                [0, 0, 1, 10],
                [0, 0, 0, 10],
                [0, 0, 0, 0],
            ],
            0,
            3,
            20,
        ),
        (
            [
                [0, 8, 0, 0, 3],
                [0, 0, 9, 0, 0],
                [0, 0, 0, 7, 2],
                [0, 0, 0, 0, 5],
                [0, 0, 0, 0, 0],
            ],
            0,
            4,
            10,
        ),
        (
            [
                [0, 3, 2, 0, 0, 0],
                [0, 0, 0, 3, 0, 0],
                [0, 1, 0, 0, 2, 0],
                [0, 0, 0, 0, 2, 2],
                [0, 0, 0, 0, 0, 3],
                [0, 0, 0, 0, 0, 0],
            ],
            0,
            5,
            5,
        ),
        (
            [
                [0, 5, 10, 0, 0],
                [0, 0, 4, 8, 0],
                [0, 0, 0, 0, 10],
                [0, 0, 0, 0, 7],
                [0, 0, 0, 0, 0],
            ],
            0,
            4,
            15,
        ),
        (
            [
                [0, 4, 3, 0],
                [0, 0, 5, 8],
                [0, 0, 0, 6],
                [0, 0, 0, 0],
            ],
            0,
            3,
            7,
        ),
        (
            [
                [0, 20, 10, 0, 0],
                [0, 0, 5, 10, 0],
                [0, 15, 0, 0, 15],
                [0, 0, 0, 0, 10],
                [0, 0, 0, 0, 0],
            ],
            0,
            4,
            25,
        ),
        (
            [
                [0, 7, 0, 5, 0],
                [0, 0, 3, 0, 0],
                [0, 0, 0, 2, 4],
                [0, 0, 0, 0, 8],
                [0, 0, 0, 0, 0],
            ],
            0,
            4,
            8,
        ),
        (
            [
                [0, 5, 0, 0, 10],
                [0, 0, 5, 0, 0],
                [0, 0, 0, 5, 0],
                [0, 0, 0, 0, 7],
                [0, 0, 0, 0, 0],
            ],
            0,
            4,
            15,
        ),
        # TODO: Add more test cases
    ],
)
def test_edmonds_karp(graph, source, sink, expected):
    ek = EdmondsKarp(graph)
    flow = ek.edmonds_karp(source, sink)
    assert flow == expected
